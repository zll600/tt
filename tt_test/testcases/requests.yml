config:
    name: "request methods testcase for test endpoint"
    variables:
        end_point: "http://localhost:5000/test"
    verify: False

teststeps:
-
    name: get with params successfully
    request:
        method: GET
        url: $end_point
        params:
            a: 1
            b: nihao
    validate:
        - eq: ["status_code", 200]
        - eq: ["body.error_code", "0"]
        - eq: ["body.error_message", "success"]
        - eq: ["body.reference", "111"]

-
    name: get with param a which is string
    request:
        method: GET
        url: $end_point
        params:
            a: hello
            b: nihao
    validate:
        - eq: ["status_code", 400]
        - eq: ["body.error_code", "1"]
        - eq: ["body.error_message", "parameter a should be an integer"]
        - eq: ["body.reference", "111"]

-
    name: get with param a which is lost
    request:
        method: GET
        url: $end_point
        params:
            b: nihao
    validate:
        - eq: ["status_code", 200]
        - eq: ["body.error_code", "0"]
        - eq: ["body.error_message", "success"]
        - eq: ["body.reference", "111"]

-
    name: get with param a which is lost
    request:
        method: GET
        url: $end_point
        params:
            a: 1
    validate:
        - eq: ["status_code", 400]
        - eq: ["body.error_code", "2"]
        - eq: ["body.error_message", "parameter b is necessary"]
        - eq: ["body.reference", "111"]